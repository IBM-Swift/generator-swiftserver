<% if (Object.keys(services).length > 0) { -%>
declared-services:
<% Object.keys(services).forEach(function(serviceType) { -%>
<% services[serviceType].forEach(function(serviceDef) { -%>
  <%-serviceDef.name%>:
    label: <%-helpers.getBluemixServiceLabel(serviceType)%>
    plan: <%-serviceDef.plan || 'Lite'%>
<% }); -%>
<% }); -%>
<% } -%>
<% if (capabilities.autoscale) { -%>
  <%-capabilities.autoscale%>:
    label: Auto-scaling
    plan: free
<% } -%>
applications:
- name: <%-appName%>
  memory: 128M
  instances: 1
  random-route: true
  buildpack: swift_buildpack
  command: <%-executableName%> --bind 0.0.0.0:$PORT
  env:
    OPENAPI_SPEC: "/explorer/swagger.yml"
<% if (Object.keys(services).length > 0) { -%>
  services:
<% Object.keys(services).forEach(function(serviceType) { -%>
<% services[serviceType].forEach(function(serviceDef) { -%>
  - <%-serviceDef.name%>
<% }); -%>
<% }); -%>
<% } -%>
<% if (capabilities.autoscale) { -%>
  - <%-capabilities.autoscale%>
<% } -%>
  timeout: 180
