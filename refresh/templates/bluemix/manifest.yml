applications:
- name: <%- bluemix.name || appName %>
<% if(bluemix.host && bluemix.domain) { -%>
  host: <%- bluemix.host %>
  domain: <%- bluemix.domain %>
<% } else { -%>
  random-route: true
<% } -%>
  memory: <%- bluemix.memory || '128M' %>
  instances: 1
  buildpack: swift_buildpack
  command: <%-executableName%> --bind 0.0.0.0:$PORT
<% if (hostSwagger) { -%>
  env:
    OPENAPI_SPEC: "/swagger/api"
<% } -%>
<% if (Object.keys(services).length > 0) { -%>
  services:
<% Object.keys(services).forEach(function(serviceType) { -%>
<% services[serviceType].forEach(function(service) { -%>
  - <%-service.name%>
<% }); -%>
<% }); -%>
<% } -%>
<% if (capabilities.autoscale) { -%>
  - <%-capabilities.autoscale%>
<% } -%>
  timeout: 180
